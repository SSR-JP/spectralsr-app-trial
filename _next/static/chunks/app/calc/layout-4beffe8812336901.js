(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{2780:function(e,t,r){Promise.resolve().then(r.bind(r,8579))},8579:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return R}});var n=r(9241),o=r(2331),s=r(4980),a=r(1326),i=r(511),c=r(7205),l=r(335),u=r(7318),d=r(5462),h=r(659),p=r(6557),f=r(64),m=r(9889),Z=r(5734),y=r(6463),g=r(2265),v=r(3098),S=r(9266),C=(r(4354),r(1096)),x=r(824),b=r(385),k=r(3269),w=r(8784),P=r(6548),I=r(4299),A=r(5041);function B(e){let{open:t,onClose:r}=e,[o]=(0,I.mN)(),a=o.apiClient,[c,l]=(0,s.Ay)(),u=(0,y.useRouter)(),d=async()=>{try{let e=await a.serviceFetch("dataset",[],{method:"DELETE"});if(!e.ok){let t=await e.text();throw Error("HTTP error! status: ".concat(e.status,", ").concat(t))}l.setDatasetStatus("unset"),r(),u.push("/")}catch(e){(0,A.yv)("Failed to reset: ".concat(e),{variant:"error"}),console.error(e)}};return(0,n.BX)(C.Z,{open:t,onClose:r,sx:{"& .MuiDialog-paper":{borderRadius:3}},children:[(0,n.tZ)(x.Z,{children:"データセットのリセット"}),(0,n.tZ)(b.Z,{children:(0,n.BX)(k.Z,{children:[(0,n.tZ)(i.Z,{sx:{mb:1},children:"現在読み込まれているデータセットを削除し、新しいデータセットを読み込みます。"}),(0,n.tZ)(i.Z,{children:"この操作は取り消せません。よろしいですか？"})]})}),(0,n.BX)(w.Z,{children:[(0,n.tZ)(P.Z,{onClick:r,children:"Cancel"}),(0,n.tZ)(P.Z,{onClick:d,children:"Reset"})]})]})}function X(e){let{open:t,onClose:r}=e,[o,a]=(0,s.Ay)(),c=async()=>{a.setIsLocked(!1),r()};return(0,n.BX)(C.Z,{open:t,onClose:r,sx:{"& .MuiDialog-paper":{borderRadius:3}},children:[(0,n.tZ)(x.Z,{children:"データセットの編集ロック解除"}),(0,n.tZ)(b.Z,{children:(0,n.BX)(k.Z,{children:[(0,n.BX)(i.Z,{sx:{mb:1},children:["このデータセットはすでに結果が保存されています。",(0,n.tZ)("br",{}),"現在のパラメータをベースに再度計算を行う場合は、ロックを解除してください。"]}),(0,n.tZ)(i.Z,{children:"ロック解除の際は、以下を注意してください。"}),(0,n.BX)("ul",{children:[(0,n.tZ)("li",{children:"結果は削除されます。"}),(0,n.BX)("li",{children:[(0,n.tZ)("s",{children:"再度計算を行うと課金が発生します"}),"(デモ版のためこれは該当しません)。"]})]})]})}),(0,n.BX)(w.Z,{children:[(0,n.tZ)(P.Z,{onClick:r,children:"キャンセル"}),(0,n.tZ)(P.Z,{variant:"contained",color:"primary",onClick:c,children:"ロック解除"})]})]})}var D=r(3460),N=r(8153);let L=["データクレンジング","フィッティング","SSRパラメータ設定","ρ最適化","SSR結果"];function R(e){let{children:t}=e,[r]=(0,s.Ay)(),{activeStep:C}=(0,o.b)(),x=(0,y.useRouter)(),[b]=(0,D.fl)();(0,N.PQ)(N.YI.primary.getArgb(b.scheme));let k=(0,N.PQ)(N.YI.tertiary.getArgb(b.scheme));(0,N.PQ)(N.YI.onSurface.getArgb(b.scheme)),(0,N.PQ)(N.YI.onSurfaceVariant.getArgb(b.scheme));let[w,P]=(0,g.useState)(null),[I,A]=(0,g.useState)(!1),[R,E]=(0,g.useState)(!1);return(0,n.BX)(a.Z,{sx:{width:"100%",height:"100%",padding:0,display:"flex",flexDirection:"column"},children:[(0,n.BX)(a.Z,{sx:{display:"flex",pt:2,pr:1,pl:1,pb:2},children:[(0,n.BX)("div",{css:(0,v.iv)({width:"30%",minWidth:240,display:"flex",flexDirection:"row",alignItems:"center"}),children:[(0,n.tZ)(i.Z,{variant:"h6",component:"div",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1},children:(0,n.tZ)(c.Z,{title:r.name,children:(0,n.tZ)("span",{children:""===r.name?"New":r.name})})}),""!==r.name&&r.isLocked&&(0,n.tZ)(l.Z,{onClick:()=>{E(!0)},css:(0,v.iv)({color:k}),children:(0,n.tZ)(S.Z,{color:"inherit"})}),""!==r.name&&!1]}),(0,n.tZ)(u.Z,{orientation:"vertical",flexItem:!0}),(0,n.tZ)("div",{style:{flexGrow:1}}),(0,n.BX)("div",{children:[(0,n.tZ)(l.Z,{onClick:e=>{P(e.currentTarget)},children:(0,n.tZ)(d.Z,{})}),(0,n.BX)(h.Z,{anchorEl:w,open:!!w,anchorOrigin:{vertical:"bottom",horizontal:"right"},onClose:()=>{P(null)},children:[(0,n.tZ)(p.Z,{onClick:()=>{x.push("/user")},children:"ユーザ情報"}),(0,n.tZ)(p.Z,{onClick:()=>{x.push("/login")},children:"再ログイン"})]})]})]}),(0,n.tZ)(f.Z,{sx:{px:1,pb:2},activeStep:C,alternativeLabel:!0,children:L.map((e,t)=>(0,n.tZ)(m.Z,{children:(0,n.tZ)(Z.Z,{children:e})},t))}),t,(0,n.tZ)(B,{open:I,onClose:()=>{A(!1)}}),(0,n.tZ)(X,{open:R,onClose:()=>{E(!1)}})]})}},2331:function(e,t,r){"use strict";r.d(t,{I:function(){return o},b:function(){return s}});var n=r(2265);let o=n.createContext(void 0),s=()=>{let e=(0,n.useContext)(o);if(!e)throw Error("useAppContext must be used within an AppProvider");return e}},4980:function(e,t,r){"use strict";r.d(t,{Ay:function(){return i},GX:function(){return l}});var n=r(9241),o=r(2265);let s=(0,o.createContext)({status:"unset",name:"",originalDataset:[],isLocked:!0}),a=(0,o.createContext)(()=>{}),i=()=>{let e=(0,o.useContext)(s),t=(0,o.useContext)(a);return[e,(0,o.useMemo)(()=>({setName:e=>{t({type:"setName",payload:e})},setOriginalDataset:e=>{t({type:"setOriginalDataset",payload:e})},setDatasetStatus:e=>{t({type:"setDatasetStatus",payload:e})},setIsLocked:e=>{t({type:"setIsLocked",payload:e})}}),[])]},c=(e,t)=>{switch(t.type){case"setName":return{...e,name:t.payload};case"setOriginalDataset":return{...e,originalDataset:t.payload};case"setDatasetStatus":return{...e,status:t.payload};case"setIsLocked":return{...e,isLocked:t.payload};default:return e}};function l(e){let{children:t}=e,[r,i]=(0,o.useReducer)(c,{status:"unset",name:"",originalDataset:[],isLocked:!0});return(0,n.tZ)(s.Provider,{value:r,children:(0,n.tZ)(a.Provider,{value:i,children:t})})}},4299:function(e,t,r){"use strict";r.d(t,{Er:function(){return Z},NZ:function(){return u},ZP:function(){return s},mN:function(){return f},xh:function(){return a}});var n=r(9241),o=r(2265);let s="ap-northeast-3_K70QvMlqR",a="66f3b23k8hv9ne8poim1b2d8p",i="https://n2cs0lys69.execute-api.ap-northeast-3.amazonaws.com/prod",c="".concat(i,"/services/current"),l={"ssr.broken-database":"データベースが破損しています。","ssr.incompatible-extension":"データに互換性のない拡張子が含まれています。","ssr.extension-unmatched":"拡張子が一致しません。","ssr.load-failure":"データの読み込みに失敗しました。","ssr.incompatible-npl":"データのNPLスタイルが互換性がありません。","ssr.file-info-unmatched":"ファイル間でNPL情報が統一されていません。","ssr.data-info-unmatched":"データ間でNPL情報が統一されていません。","ssr.data-size-unmatched":"データ間でサイズが統一されていません。","ssr.incorrect-parameters":"パラメータの指定が正しくありません。","ssr.get-mean-failure":"平均値の取得に失敗しました。","ssr.fitting-failure":"フィッティングに失敗しました。","ssr.wrong-fitting-result":"フィッティング結果が妥当ではありません。","ssr.out-of-memory":"メモリ不足です。","ssr.grid-contains-outside":"予想される位置が範囲外に含まれています。","ssr.others":"不明なエラーが発生しました。"};async function u(e){if(e.ok)return;if(404===e.status)return"通信先が見つかりませんでした(404)。";let t=await e.text();try{let e=JSON.parse(t);console.log(e);let r=function(e){if(void 0==e)return;let t=e.detail;if(void 0==t)return;let r=t.code,n=t.message;if(void 0!=r&&void 0!=n&&"string"==typeof r&&"string"==typeof n)return l[r]||n}(e);if(void 0!=r)return r}catch(e){console.warn("Failed to parse error response",e)}return"エラーが発生しました。".concat(e.status,": ").concat(t)}let d=(0,o.createContext)({apiClient:m(i,c,null),apiGatewayUrl:i,serviceStatus:"configuring"}),h=(0,o.createContext)(()=>{}),p=(e,t)=>"setServiceStatus"===t.type?{...e,serviceStatus:t.payload.status}:e,f=()=>{let e=(0,o.useContext)(d),t=(0,o.useContext)(h);return(0,o.useRef)(e).current=e,[e,(0,o.useMemo)(()=>({setServiceStatus:e=>{t({type:"setServiceStatus",payload:{status:e}})}}),[])]};function m(e,t,r){let n=async(e,n,o)=>{let s=n.length>0?"?"+n.join("&"):"",a="".concat(t,"/").concat(e).concat(s),i=new Headers(null==o?void 0:o.headers);return r&&i.set("Authorization","Bearer ".concat(r)),fetch(a,{...o,headers:i})};return console.log("makeApiClient()"),{serviceFetch:async(e,t,r)=>n(e,t,r),setNewAccessToken:e=>{r=e,localStorage.setItem("token",e)},getAccessToken:()=>r,restoreServiceSession:async()=>{r=localStorage.getItem("token");try{let e=await n("hello",[]);if(!e.ok)throw Error("HTTP error! status: ".concat(e.status))}catch(e){return console.error(e),!1}return!0}}}function Z(e){let{children:t}=e,r=(0,o.useMemo)(()=>m(i,c,null),[]),[s,a]=(0,o.useReducer)(p,{apiClient:r,apiGatewayUrl:i,serviceStatus:"configuring"}),l=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{if(!l.current)return async function(){try{let e=await s.apiClient.restoreServiceSession();console.log("restoreServiceSession",e),e?a({type:"setServiceStatus",payload:{status:"connected"}}):a({type:"setServiceStatus",payload:{status:"not-login"}})}catch(e){console.error(e),a({type:"setServiceStatus",payload:{status:"not-login"}})}}(),()=>{l.current=!0}},[]),(0,n.tZ)(d.Provider,{value:s,children:(0,n.tZ)(h.Provider,{value:a,children:t})})}},3460:function(e,t,r){"use strict";r.d(t,{ThemeStoreProvider:function(){return Z},fl:function(){return f}});var n=r(9241),o=r(8438),s=r.n(o),a=r(9380),i=r(2686),c=r(1705),l=r(8153),u=r(2265),d=r(1246);let h=(0,u.createContext)({scheme:new l.S2(l.OP.fromInt(4435848),!1,-1),sourceColor:4435848}),p=(0,u.createContext)(()=>{}),f=()=>{let e=(0,u.useContext)(h),t=(0,u.useContext)(p);return[e,{resetSourceColor:()=>{t({type:"setTheme",payload:{scheme:new l.S2(l.OP.fromInt(4435848),!1,-1),sourceColor:4435848}})}}]},m=(e,t)=>{if("setTheme"===t.type){let{scheme:r,sourceColor:n}=t.payload;return e.sourceColor===n?e:{...e,scheme:r,sourceColor:n}}return e},Z=e=>{let{children:t}=e,[r,o]=(0,u.useReducer)(m,{scheme:new l.S2(l.OP.fromInt(4435848),!1,-1),sourceColor:4435848}),f=(0,a.Z)((0,i.Z)({palette:{mode:"light",primary:{main:(0,l.PQ)(l.YI.primary.getArgb(r.scheme))},secondary:{main:(0,l.PQ)(l.YI.secondary.getArgb(r.scheme))},background:{default:(0,l.PQ)(l.YI.surface.getArgb(r.scheme)),paper:(0,l.PQ)(l.YI.surfaceContainer.getArgb(r.scheme))},error:{main:(0,l.PQ)(l.YI.error.getArgb(r.scheme))},text:{primary:(0,l.PQ)(l.YI.onSurface.getArgb(r.scheme))}},typography:{fontFamily:s().style.fontFamily}}));return(0,n.BX)(c.Z,{theme:f,children:[(0,n.tZ)(d.Z,{styles:e=>({body:{transition:e.transitions.create(["background-color","transform"])}})}),(0,n.tZ)(h.Provider,{value:r,children:(0,n.tZ)(p.Provider,{value:o,children:t})})]})}}},function(e){e.O(0,[665,388,526,41,36,650,2,685,925,659,273,15,373,686,971,23,744],function(){return e(e.s=2780)}),_N_E=e.O()}]);