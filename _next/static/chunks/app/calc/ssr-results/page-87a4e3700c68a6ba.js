(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6960],{1029:function(e,t,r){Promise.resolve().then(r.bind(r,3158))},3158:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var n=r(9241),o=r(1326),s=r(4990),a=r(6548),l=r(2265),i=r(7818),c=r(6463),u=r(3457),d=r(2331),f=r(9278),p=r(4299),m=r(4980),h=r(5041),y=r(3796);let v=(0,i.default)(()=>Promise.all([r.e(5934),r.e(9109),r.e(2008)]).then(r.bind(r,2008)),{loadableGenerated:{webpack:()=>[2008]},ssr:!1}),g=e=>{for(let t of[{regex:/filename\*=UTF-8''([^;]+)/i,transform:e=>decodeURIComponent(e.replace(/['"]/g,""))},{regex:/filename="([^"]*)"/,transform:e=>e}]){let r=e.match(t.regex);if(r&&r[1])return t.transform(r[1])}return"downloaded_file.ext"};function x(){let e=(0,c.useRouter)(),[t]=(0,p.mN)(),r=t.apiClient,{setActiveStep:i}=(0,d.b)(),[x,w]=(0,l.useState)({}),[b,C]=(0,l.useState)([]),[Z,k]=(0,m.Ay)(),P=Z.originalDataset,S=async()=>{try{let e=await r.serviceFetch("dataset/ssr/results/latest",[],{method:"GET"});if(!e.ok){let t=await e.text();throw Error("HTTP error! status: ".concat(e.status,", ").concat(t))}let t=await e.json(),n={x:t.samples.map(e=>e[0]),y:t.samples.map(e=>e[1]),mode:"lines+markers",showlegend:!1,marker:{color:"#de7bc0"}};w(n)}catch(e){console.error(e),(0,h.yv)("".concat(e),{variant:"error",action:y.D,persist:!0})}},j=async()=>{try{let e=await r.serviceFetch("dataset/ssr/results/latest/download",[],{method:"GET"}),t=await e.blob(),n=window.URL.createObjectURL(t),o=document.createElement("a");o.style.display="none",o.href=n;let s=e.headers.get("Content-Disposition"),a=s?g(s):"downloaded_file.ext";o.download=a,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(n),document.body.removeChild(o)}catch(e){console.error(e),(0,h.yv)("".concat(e),{variant:"error",action:y.D,persist:!0})}},R=async()=>{try{let e=await r.serviceFetch("dataset/ssr/results/latest/workspace/download",[],{method:"GET"});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.blob(),n=window.URL.createObjectURL(t),o=document.createElement("a");o.style.display="none",o.href=n;let s=e.headers.get("Content-Disposition"),a=s?g(s):"workspace.zip";o.download=a,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(n),document.body.removeChild(o)}catch(e){console.error(e),(0,h.yv)("".concat(e),{variant:"error",action:y.D,persist:!0})}};return(0,l.useEffect)(()=>{if("loaded"!==Z.status){e.push("/");return}i(4),k.setIsLocked(!0);let t=P.filter(e=>e.using),{samplesX:r}=t[0],n=r.map((e,r)=>t.map(e=>e.samplesY[r]).sort((e,t)=>e-t));C((0,f.T)(r,n)),S()},[]),(0,n.tZ)(u.T,{onBack:()=>{e.push("/calc/rho-optimize")},children:(0,n.BX)(o.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%"},children:[(0,n.tZ)(s.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:(0,n.tZ)(v,{data:[...b,x],layout:{width:640,height:400}})}),(0,n.tZ)(a.Z,{sx:{mt:2},variant:"contained",onClick:j,children:"結果をダウンロード"}),(0,n.tZ)(a.Z,{sx:{mt:2},variant:"text",onClick:R,children:"作業内容をダウンロード"})]})})}},1326:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var n=r(2988),o=r(3950),s=r(2265),a=r(4839),l=r(5785),i=r(7267),c=r(261),u=r(4874),d=r(7437);let f=["className","component"];var p=r(9424),m=r(2686),h=r(2737);let y=(0,r(2296).Z)("MuiBox",["root"]),v=(0,m.Z)();var g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{themeId:t,defaultTheme:r,defaultClassName:p="MuiBox-root",generateClassName:m}=e,h=(0,l.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(i.Z);return s.forwardRef(function(e,s){let l=(0,u.Z)(r),i=(0,c.Z)(e),{className:y,component:v="div"}=i,g=(0,o.Z)(i,f);return(0,d.jsx)(h,(0,n.Z)({as:v,ref:s,className:(0,a.Z)(y,m?m(p):p),theme:t&&l[t]||l},g))})}({themeId:h.Z,defaultTheme:v,defaultClassName:y.root,generateClassName:p.Z.generate})},7818:function(e,t,r){"use strict";r.d(t,{default:function(){return o.a}});var n=r(551),o=r.n(n)},551:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let n=r(9920);r(7437),r(2265);let o=n._(r(148));function s(e,t){var r;let n={loading:e=>{let{error:t,isLoading:r,pastDelay:n}=e;return null}};"function"==typeof e&&(n.loader=e);let s={...n,...t};return(0,o.default)({...s,modules:null==(r=s.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},912:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return o}});let n=r(5592);function o(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return r}},148:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let n=r(7437),o=r(2265),s=r(912),a=r(1481);function l(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},c=function(e){let t={...i,...e},r=(0,o.lazy)(()=>t.loader().then(l)),c=t.loading;function u(e){let l=c?(0,n.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,i=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(a.PreloadCss,{moduleIds:t.modules}):null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(o.Suspense,{fallback:l,children:i})}return u.displayName="LoadableComponent",u}},1481:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return s}});let n=r(7437),o=r(8512);function s(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=(0,o.getExpectedRequestStore)("next/dynamic css"),s=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));s.push(...t)}}return 0===s.length?null:(0,n.jsx)(n.Fragment,{children:s.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},2331:function(e,t,r){"use strict";r.d(t,{I:function(){return o},b:function(){return s}});var n=r(2265);let o=n.createContext(void 0),s=()=>{let e=(0,n.useContext)(o);if(!e)throw Error("useAppContext must be used within an AppProvider");return e}},3457:function(e,t,r){"use strict";r.d(t,{T:function(){return a}});var n=r(9241),o=r(1326),s=r(6548);function a(e){let{children:t,onNext:r,onBack:a}=e;return(0,n.BX)(o.Z,{sx:{flexGrow:1,boxSizing:"border-box",overflow:"auto",display:"flex",flexDirection:"column"},children:[(0,n.tZ)(o.Z,{sx:{padding:2,overflowY:"overlay",flexGrow:1},children:t}),(0,n.BX)(o.Z,{sx:{display:"flex",justifyContent:"flex-end",p:1},children:[(0,n.tZ)(s.Z,{sx:{m:1},variant:"outlined",onClick:a,disabled:!a,children:"もどる"}),(0,n.tZ)(s.Z,{sx:{m:1},variant:"contained",onClick:r,disabled:!r,children:"つぎへ"})]})]})}a.defaultProps={onNext:void 0,onBack:void 0}},3796:function(e,t,r){"use strict";r.d(t,{D:function(){return i}});var n=r(9241),o=r(6548),s=r(5041),a=r(3460),l=r(8153);let i=e=>{let[t]=(0,a.fl)();return(0,l.PQ)(l.YI.inversePrimary.getArgb(t.scheme)),(0,n.tZ)(n.HY,{children:(0,n.tZ)(o.Z,{sx:{color:"inherit"},onClick:()=>{(0,s.sy)(e)},children:"Close"})})}},9278:function(e,t,r){"use strict";r.d(t,{T:function(){return s}});var n=r(2592);function o(e,t){let r=t/100*(e.length-1),n=Math.floor(r),o=n+1,s=r%1;return o>=e.length?e[n]:e[n]*(1-s)+e[o]*s}function s(e,t){let r={x:[...e,...e.toReversed()],y:[...t.map(e=>o(e,0)),...t.map(e=>o(e,100)).reverse()],fill:"toself",fillcolor:n.Z[50],line:{width:0},type:"scatter",showlegend:!1},s={x:[...e,...e.toReversed()],y:[...t.map(e=>o(e,10)),...t.map(e=>o(e,90)).reverse()],fill:"toself",fillcolor:n.Z[100],line:{width:0},type:"scatter",showlegend:!1},a={x:[...e,...e.toReversed()],y:[...t.map(e=>o(e,20)),...t.map(e=>o(e,80)).reverse()],fill:"toself",fillcolor:n.Z[200],line:{width:0},type:"scatter",showlegend:!1};return[r,s,a,{x:[...e,...e.toReversed()],y:[...t.map(e=>o(e,30)),...t.map(e=>o(e,70)).reverse()],fill:"toself",fillcolor:n.Z[300],line:{width:0},type:"scatter",showlegend:!1},{x:[...e,...e.toReversed()],y:[...t.map(e=>o(e,40)),...t.map(e=>o(e,60)).reverse()],fill:"toself",fillcolor:n.Z[400],line:{width:0},type:"scatter",showlegend:!1},{x:e,y:null==t?void 0:t.map(e=>o(e,50)),mode:"lines",marker:{color:n.Z[500]},showlegend:!1}]}},4980:function(e,t,r){"use strict";r.d(t,{Ay:function(){return l},GX:function(){return c}});var n=r(9241),o=r(2265);let s=(0,o.createContext)({status:"unset",name:"",originalDataset:[],isLocked:!0}),a=(0,o.createContext)(()=>{}),l=()=>{let e=(0,o.useContext)(s),t=(0,o.useContext)(a);return[e,(0,o.useMemo)(()=>({setName:e=>{t({type:"setName",payload:e})},setOriginalDataset:e=>{t({type:"setOriginalDataset",payload:e})},setDatasetStatus:e=>{t({type:"setDatasetStatus",payload:e})},setIsLocked:e=>{t({type:"setIsLocked",payload:e})}}),[])]},i=(e,t)=>{switch(t.type){case"setName":return{...e,name:t.payload};case"setOriginalDataset":return{...e,originalDataset:t.payload};case"setDatasetStatus":return{...e,status:t.payload};case"setIsLocked":return{...e,isLocked:t.payload};default:return e}};function c(e){let{children:t}=e,[r,l]=(0,o.useReducer)(i,{status:"unset",name:"",originalDataset:[],isLocked:!0});return(0,n.tZ)(s.Provider,{value:r,children:(0,n.tZ)(a.Provider,{value:l,children:t})})}},4299:function(e,t,r){"use strict";r.d(t,{Er:function(){return y},NZ:function(){return u},ZP:function(){return s},mN:function(){return m},xh:function(){return a}});var n=r(9241),o=r(2265);let s="ap-northeast-3_K70QvMlqR",a="66f3b23k8hv9ne8poim1b2d8p",l="https://n2cs0lys69.execute-api.ap-northeast-3.amazonaws.com/prod",i="".concat(l,"/services/current"),c={"ssr.broken-database":"データベースが破損しています。","ssr.incompatible-extension":"データに互換性のない拡張子が含まれています。","ssr.extension-unmatched":"拡張子が一致しません。","ssr.load-failure":"データの読み込みに失敗しました。","ssr.incompatible-npl":"データのNPLスタイルが互換性がありません。","ssr.file-info-unmatched":"ファイル間でNPL情報が統一されていません。","ssr.data-info-unmatched":"データ間でNPL情報が統一されていません。","ssr.data-size-unmatched":"データ間でサイズが統一されていません。","ssr.incorrect-parameters":"パラメータの指定が正しくありません。","ssr.get-mean-failure":"平均値の取得に失敗しました。","ssr.fitting-failure":"フィッティングに失敗しました。","ssr.wrong-fitting-result":"フィッティング結果が妥当ではありません。","ssr.out-of-memory":"メモリ不足です。","ssr.grid-contains-outside":"予想される位置が範囲外に含まれています。","ssr.others":"不明なエラーが発生しました。"};async function u(e){if(e.ok)return;if(404===e.status)return"通信先が見つかりませんでした(404)。";let t=await e.text();try{let e=JSON.parse(t);console.log(e);let r=function(e){if(void 0==e)return;let t=e.detail;if(void 0==t)return;let r=t.code,n=t.message;if(void 0!=r&&void 0!=n&&"string"==typeof r&&"string"==typeof n)return c[r]||n}(e);if(void 0!=r)return r}catch(e){console.warn("Failed to parse error response",e)}return"エラーが発生しました。".concat(e.status,": ").concat(t)}let d=(0,o.createContext)({apiClient:h(l,i,null),apiGatewayUrl:l,serviceStatus:"configuring"}),f=(0,o.createContext)(()=>{}),p=(e,t)=>"setServiceStatus"===t.type?{...e,serviceStatus:t.payload.status}:e,m=()=>{let e=(0,o.useContext)(d),t=(0,o.useContext)(f);return(0,o.useRef)(e).current=e,[e,(0,o.useMemo)(()=>({setServiceStatus:e=>{t({type:"setServiceStatus",payload:{status:e}})}}),[])]};function h(e,t,r){let n=async(e,n,o)=>{let s=n.length>0?"?"+n.join("&"):"",a="".concat(t,"/").concat(e).concat(s),l=new Headers(null==o?void 0:o.headers);return r&&l.set("Authorization","Bearer ".concat(r)),fetch(a,{...o,headers:l})};return console.log("makeApiClient()"),{serviceFetch:async(e,t,r)=>n(e,t,r),setNewAccessToken:e=>{r=e,localStorage.setItem("token",e)},getAccessToken:()=>r,restoreServiceSession:async()=>{r=localStorage.getItem("token");try{let e=await n("hello",[]);if(!e.ok)throw Error("HTTP error! status: ".concat(e.status))}catch(e){return console.error(e),!1}return!0}}}function y(e){let{children:t}=e,r=(0,o.useMemo)(()=>h(l,i,null),[]),[s,a]=(0,o.useReducer)(p,{apiClient:r,apiGatewayUrl:l,serviceStatus:"configuring"}),c=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{if(!c.current)return async function(){try{let e=await s.apiClient.restoreServiceSession();console.log("restoreServiceSession",e),e?a({type:"setServiceStatus",payload:{status:"connected"}}):a({type:"setServiceStatus",payload:{status:"not-login"}})}catch(e){console.error(e),a({type:"setServiceStatus",payload:{status:"not-login"}})}}(),()=>{c.current=!0}},[]),(0,n.tZ)(d.Provider,{value:s,children:(0,n.tZ)(f.Provider,{value:a,children:t})})}},3460:function(e,t,r){"use strict";r.d(t,{ThemeStoreProvider:function(){return y},fl:function(){return m}});var n=r(9241),o=r(8438),s=r.n(o),a=r(9380),l=r(2686),i=r(1705),c=r(8153),u=r(2265),d=r(1246);let f=(0,u.createContext)({scheme:new c.S2(c.OP.fromInt(4435848),!1,-1),sourceColor:4435848}),p=(0,u.createContext)(()=>{}),m=()=>{let e=(0,u.useContext)(f),t=(0,u.useContext)(p);return[e,{resetSourceColor:()=>{t({type:"setTheme",payload:{scheme:new c.S2(c.OP.fromInt(4435848),!1,-1),sourceColor:4435848}})}}]},h=(e,t)=>{if("setTheme"===t.type){let{scheme:r,sourceColor:n}=t.payload;return e.sourceColor===n?e:{...e,scheme:r,sourceColor:n}}return e},y=e=>{let{children:t}=e,[r,o]=(0,u.useReducer)(h,{scheme:new c.S2(c.OP.fromInt(4435848),!1,-1),sourceColor:4435848}),m=(0,a.Z)((0,l.Z)({palette:{mode:"light",primary:{main:(0,c.PQ)(c.YI.primary.getArgb(r.scheme))},secondary:{main:(0,c.PQ)(c.YI.secondary.getArgb(r.scheme))},background:{default:(0,c.PQ)(c.YI.surface.getArgb(r.scheme)),paper:(0,c.PQ)(c.YI.surfaceContainer.getArgb(r.scheme))},error:{main:(0,c.PQ)(c.YI.error.getArgb(r.scheme))},text:{primary:(0,c.PQ)(c.YI.onSurface.getArgb(r.scheme))}},typography:{fontFamily:s().style.fontFamily}}));return(0,n.BX)(i.Z,{theme:m,children:[(0,n.tZ)(d.Z,{styles:e=>({body:{transition:e.transitions.create(["background-color","transform"])}})}),(0,n.tZ)(f.Provider,{value:r,children:(0,n.tZ)(p.Provider,{value:o,children:t})})]})}}},function(e){e.O(0,[1665,9388,526,5041,2036,1650,2971,7023,1744],function(){return e(e.s=1029)}),_N_E=e.O()}]);