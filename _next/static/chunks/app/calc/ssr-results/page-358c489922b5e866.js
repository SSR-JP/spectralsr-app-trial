(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6960],{1029:function(e,t,r){Promise.resolve().then(r.bind(r,3158))},3158:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var o=r(9241),a=r(1326),l=r(4990),n=r(6548),s=r(2265),i=r(7818),c=r(6463),d=r(1295),f=r(2331),h=r(9278),m=r(4299),u=r(4980),p=r(5041),w=r(3796);let y=(0,i.default)(()=>Promise.all([r.e(5934),r.e(9109),r.e(2008)]).then(r.bind(r,2008)),{loadableGenerated:{webpack:()=>[2008]},ssr:!1}),v=e=>{for(let t of[{regex:/filename\*=UTF-8''([^;]+)/i,transform:e=>decodeURIComponent(e.replace(/['"]/g,""))},{regex:/filename="([^"]*)"/,transform:e=>e}]){let r=e.match(t.regex);if(r&&r[1])return t.transform(r[1])}return"downloaded_file.ext"};function x(){let e=(0,c.useRouter)(),[t]=(0,m.mN)(),r=t.apiClient,{setActiveStep:i}=(0,f.b)(),[x,g]=(0,s.useState)({}),[b,k]=(0,s.useState)([]),[R,Z]=(0,u.Ay)(),C=R.originalDataset,E=async()=>{try{let e=await r.serviceFetch("dataset/ssr/results/latest",[],{method:"GET"});if(!e.ok){let t=await e.text();throw Error("HTTP error! status: ".concat(e.status,", ").concat(t))}let t=await e.json(),o={x:t.samples.map(e=>e[0]),y:t.samples.map(e=>e[1]),mode:"lines+markers",showlegend:!1,marker:{color:"#de7bc0"}};g(o)}catch(e){console.error(e),(0,p.yv)("".concat(e),{variant:"error",action:w.D,persist:!0})}},T=async()=>{try{let e=await r.serviceFetch("dataset/ssr/results/latest/download",[],{method:"GET"}),t=await e.blob(),o=window.URL.createObjectURL(t),a=document.createElement("a");a.style.display="none",a.href=o;let l=e.headers.get("Content-Disposition"),n=l?v(l):"downloaded_file.ext";a.download=n,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(o),document.body.removeChild(a)}catch(e){console.error(e),(0,p.yv)("".concat(e),{variant:"error",action:w.D,persist:!0})}},U=async()=>{try{let e=await r.serviceFetch("dataset/ssr/results/latest/workspace/download",[],{method:"GET"});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.blob(),o=window.URL.createObjectURL(t),a=document.createElement("a");a.style.display="none",a.href=o;let l=e.headers.get("Content-Disposition"),n=l?v(l):"workspace.zip";a.download=n,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(o),document.body.removeChild(a)}catch(e){console.error(e),(0,p.yv)("".concat(e),{variant:"error",action:w.D,persist:!0})}};return(0,s.useEffect)(()=>{if("loaded"!==R.status){e.push("/");return}i(4),Z.setIsLocked(!0);let t=C.filter(e=>e.using),{samplesX:r}=t[0],o=r.map((e,r)=>t.map(e=>e.samplesY[r]).sort((e,t)=>e-t));k((0,h.T)(r,o)),E()},[]),(0,o.tZ)(d.T,{onBack:()=>{e.push("/calc/rho-optimize")},children:(0,o.BX)(a.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%"},children:[(0,o.tZ)(l.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:(0,o.tZ)(y,{data:[...b,x],layout:{width:640,height:400}})}),(0,o.tZ)(n.Z,{sx:{mt:2},variant:"contained",onClick:T,children:"結果をダウンロード"}),(0,o.tZ)(n.Z,{sx:{mt:2},variant:"text",onClick:U,children:"作業内容をダウンロード"})]})})}},9278:function(e,t,r){"use strict";r.d(t,{T:function(){return l}});var o=r(2592);function a(e,t){let r=t/100*(e.length-1),o=Math.floor(r),a=o+1,l=r%1;return a>=e.length?e[o]:e[o]*(1-l)+e[a]*l}function l(e,t){let r={x:[...e,...e.toReversed()],y:[...t.map(e=>a(e,0)),...t.map(e=>a(e,100)).reverse()],fill:"toself",fillcolor:o.Z[50],line:{width:0},type:"scatter",showlegend:!1},l={x:[...e,...e.toReversed()],y:[...t.map(e=>a(e,10)),...t.map(e=>a(e,90)).reverse()],fill:"toself",fillcolor:o.Z[100],line:{width:0},type:"scatter",showlegend:!1},n={x:[...e,...e.toReversed()],y:[...t.map(e=>a(e,20)),...t.map(e=>a(e,80)).reverse()],fill:"toself",fillcolor:o.Z[200],line:{width:0},type:"scatter",showlegend:!1};return[r,l,n,{x:[...e,...e.toReversed()],y:[...t.map(e=>a(e,30)),...t.map(e=>a(e,70)).reverse()],fill:"toself",fillcolor:o.Z[300],line:{width:0},type:"scatter",showlegend:!1},{x:[...e,...e.toReversed()],y:[...t.map(e=>a(e,40)),...t.map(e=>a(e,60)).reverse()],fill:"toself",fillcolor:o.Z[400],line:{width:0},type:"scatter",showlegend:!1},{x:e,y:null==t?void 0:t.map(e=>a(e,50)),mode:"lines",marker:{color:o.Z[500]},showlegend:!1}]}}},function(e){e.O(0,[1665,9241,526,2036,819,6548,3676,152,972,6102,6156,2971,7023,1744],function(){return e(e.s=1029)}),_N_E=e.O()}]);