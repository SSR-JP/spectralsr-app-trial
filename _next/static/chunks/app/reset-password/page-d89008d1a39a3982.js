(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2363],{6249:function(){},310:function(e,t,r){Promise.resolve().then(r.bind(r,1793))},1793:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var n=r(9241),i=r(4299),a=r(511),o=r(8549),s=r(7351),c=r(1236),l=r(6548),u=r(437),d=r(8165),v=r(6631),f=r(2265),p=r(3098),h=r(5041),m=r(6463),g=r(3460),y=r(8153);function x(){let[e]=(0,g.fl)(),t=(0,y.PQ)(y.YI.primary.getArgb(e.scheme));(0,y.PQ)(y.YI.onSurface.getArgb(e.scheme));let r=(0,y.PQ)(y.YI.onSurfaceVariant.getArgb(e.scheme)),[x,Z]=(0,f.useState)("email"),[b,S]=(0,f.useState)(""),[C,P]=(0,f.useState)(!1),[w,k]=(0,f.useState)(!1),[I,A]=(0,f.useState)(""),[B,E]=(0,f.useState)(""),[R,X]=(0,f.useState)(null),[N,Q]=(0,f.useState)(null),T=(0,m.useRouter)(),F=(0,f.useRef)(null),Y=(0,f.useRef)(null),U=(0,f.useRef)(null),_=(0,f.useRef)(null),D=(0,f.useMemo)(()=>new v.AM({UserPoolId:i.ZP,ClientId:i.xh}),[]),L=e=>0===e.length?null:e.length<8?"パスワードは8文字以上で入力してください":/[a-z]/.test(e)?/[A-Z]/.test(e)?/[0-9]/.test(e)?/[^a-zA-Z0-9]/.test(e)?null:"パスワードに記号(英数字以外の文字)を含めてください":"パスワードに数字を含めてください":"パスワードに大文字英語を含めてください":"パスワードに小文字英語を含めてください",M=e=>{A(e),X(L(e)),B&&e!==B?Q("パスワードが一致しません"):B&&e===B&&Q(null)},O=e=>{E(e),0===e.length?Q(null):I!==e?Q("パスワードが一致しません"):Q(null)};return"email"===x?(0,n.tZ)("div",{children:(0,n.BX)("div",{css:(0,p.iv)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",padding:"16px"}),children:[(0,n.tZ)(a.Z,{variant:"h4",css:(0,p.iv)({color:t,fontWeight:"bold",marginBottom:"24px",textAlign:"center"}),children:"パスワードリセット"}),(0,n.tZ)(a.Z,{variant:"body1",css:(0,p.iv)({color:r,marginBottom:"32px",textAlign:"center",maxWidth:"400px"}),children:"登録されているメールアドレスを入力してください。パスワードリセット用の確認コードを送信します。"}),(0,n.BX)("div",{css:(0,p.iv)({display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px"}),children:[(0,n.BX)(o.Z,{variant:"standard",children:[(0,n.tZ)(s.Z,{children:"メールアドレス"}),(0,n.tZ)(c.Z,{type:"email",inputRef:F,disabled:C})]}),(0,n.BX)("div",{css:(0,p.iv)({marginTop:"32px",display:"flex",flexDirection:"column",gap:"16px"}),children:[(0,n.tZ)(l.Z,{variant:"contained",onClick:()=>{var e;let t=null===(e=F.current)||void 0===e?void 0:e.value;if(!t){(0,h.yv)("メールアドレスを入力してください。",{variant:"error"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){(0,h.yv)("有効なメールアドレスを入力してください。",{variant:"error"});return}P(!0),new v.ws({Username:t,Pool:D}).forgotPassword({onSuccess:function(e){(0,h.yv)("確認コードをメールに送信しました。",{variant:"success"}),S(t),Z("reset"),P(!1)},onFailure:function(e){switch(console.error(e),P(!1),e.name){case"UserNotFoundException":(0,h.yv)("このメールアドレスは登録されていません。",{variant:"error"});break;case"InvalidParameterException":(0,h.yv)("無効なメールアドレスです。",{variant:"error"});break;case"LimitExceededException":(0,h.yv)("リクエスト回数の上限に達しました。しばらく待ってから再試行してください。",{variant:"error"});break;default:(0,h.yv)("エラーが発生しました: ".concat(e.message),{variant:"error"})}},inputVerificationCode:function(e){(0,h.yv)("確認コードをメールに送信しました。",{variant:"success"}),S(t),Z("reset"),P(!1)}})},disabled:C,css:(0,p.iv)({padding:"12px 24px"}),children:C?"送信中...":"確認コードを送信"}),(0,n.tZ)(l.Z,{variant:"text",onClick:()=>T.push("/login"),disabled:C,children:"ログインページに戻る"})]})]})]})}):(0,n.tZ)("div",{children:(0,n.BX)("div",{css:(0,p.iv)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"16px"}),children:[(0,n.tZ)(a.Z,{variant:"h4",css:(0,p.iv)({color:t,fontWeight:"bold",marginBottom:"24px",textAlign:"center"}),children:"新しいパスワードを設定"}),(0,n.BX)(a.Z,{variant:"body1",css:(0,p.iv)({color:r,marginBottom:"24px",textAlign:"center",maxWidth:"400px"}),children:[b," に送信された確認コードと新しいパスワードを入力してください。"]}),(0,n.BX)("div",{css:(0,p.iv)({display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",gap:"16px"}),children:[(0,n.BX)(o.Z,{variant:"standard",children:[(0,n.tZ)(s.Z,{children:"確認コード"}),(0,n.tZ)(c.Z,{inputRef:Y,disabled:C,placeholder:"メールで受信した6桁のコード"})]}),(0,n.BX)(o.Z,{variant:"standard",error:!!R,children:[(0,n.tZ)(s.Z,{children:"新しいパスワード"}),(0,n.tZ)(c.Z,{type:"password",inputRef:U,disabled:C,value:I,onChange:e=>M(e.target.value)}),R&&(0,n.tZ)(u.Z,{children:R})]}),(0,n.BX)(o.Z,{variant:"standard",error:!!N,children:[(0,n.tZ)(s.Z,{children:"パスワード確認"}),(0,n.tZ)(c.Z,{type:"password",inputRef:_,disabled:C,value:B,onChange:e=>O(e.target.value)}),N&&(0,n.tZ)(u.Z,{children:N})]}),(0,n.BX)(d.Z,{severity:"info",css:(0,p.iv)({marginTop:"8px"}),children:["パスワード要件:",(0,n.BX)("ul",{css:(0,p.iv)({margin:"8px 0",paddingLeft:"20px"}),children:[(0,n.tZ)("li",{children:"8文字以上"}),(0,n.tZ)("li",{children:"大文字・小文字を含む"}),(0,n.tZ)("li",{children:"数字を含む"}),(0,n.tZ)("li",{children:"記号を含む"})]})]}),(0,n.BX)("div",{css:(0,p.iv)({marginTop:"24px",display:"flex",flexDirection:"column",gap:"16px"}),children:[(0,n.tZ)(l.Z,{variant:"contained",onClick:()=>{var e;let t=null===(e=Y.current)||void 0===e?void 0:e.value;if(!t){(0,h.yv)("確認コードを入力してください。",{variant:"error"});return}if(!I){(0,h.yv)("新しいパスワードを入力してください。",{variant:"error"});return}if(!B){(0,h.yv)("パスワード確認を入力してください。",{variant:"error"});return}if(I!==B){(0,h.yv)("パスワードが一致しません。",{variant:"error"});return}let r=L(I);if(r){(0,h.yv)(r,{variant:"error"});return}P(!0),new v.ws({Username:b,Pool:D}).confirmPassword(t,I,{onSuccess:function(){(0,h.yv)("パスワードが正常にリセットされました。",{variant:"success"}),T.push("/login")},onFailure:function(e){switch(console.error(e),P(!1),e.name){case"CodeMismatchException":(0,h.yv)("確認コードが正しくありません。",{variant:"error"});break;case"ExpiredCodeException":(0,h.yv)("確認コードの有効期限が切れています。新しいコードをリクエストしてください。",{variant:"error"});break;case"InvalidPasswordException":(0,h.yv)("パスワードが要件を満たしていません。",{variant:"error"});break;case"InvalidParameterException":(0,h.yv)("無効なパラメータです。",{variant:"error"});break;case"UserNotFoundException":(0,h.yv)("ユーザーが見つかりません。",{variant:"error"});break;default:(0,h.yv)("エラーが発生しました: ".concat(e.message),{variant:"error"})}}})},disabled:C||w,css:(0,p.iv)({padding:"12px 24px"}),children:C?"更新中...":"パスワードを更新"}),(0,n.tZ)(l.Z,{variant:"outlined",onClick:()=>{if(!b){(0,h.yv)("メールアドレスが見つかりません。",{variant:"error"});return}k(!0),new v.ws({Username:b,Pool:D}).forgotPassword({onSuccess:function(e){(0,h.yv)("確認コードを再送信しました。",{variant:"success"}),k(!1)},onFailure:function(e){(console.error(e),k(!1),"LimitExceededException"===e.name)?(0,h.yv)("リクエスト回数の上限に達しました。しばらく待ってから再試行してください。",{variant:"error"}):(0,h.yv)("確認コードの再送信に失敗しました: ".concat(e.message),{variant:"error"})},inputVerificationCode:function(e){(0,h.yv)("確認コードを再送信しました。",{variant:"success"}),k(!1)}})},disabled:C||w,children:w?"再送信中...":"確認コードを再送信"}),(0,n.tZ)(l.Z,{variant:"text",onClick:()=>{Z("email"),S(""),A(""),E(""),X(null),Q(null),Y.current&&(Y.current.value=""),U.current&&(U.current.value=""),_.current&&(_.current.value="")},disabled:C||w,children:"戻る"}),(0,n.tZ)(l.Z,{variant:"text",onClick:()=>T.push("/login"),disabled:C||w,children:"ログインページに戻る"})]})]})]})})}},4299:function(e,t,r){"use strict";r.d(t,{Er:function(){return m},NZ:function(){return u},ZP:function(){return a},mN:function(){return p},xh:function(){return o}});var n=r(9241),i=r(2265);let a="ap-northeast-3_K70QvMlqR",o="66f3b23k8hv9ne8poim1b2d8p",s="https://n2cs0lys69.execute-api.ap-northeast-3.amazonaws.com/prod",c="".concat(s,"/services/current"),l={"ssr.broken-database":"データベースが破損しています。","ssr.incompatible-extension":"データに互換性のない拡張子が含まれています。","ssr.extension-unmatched":"拡張子が一致しません。","ssr.load-failure":"データの読み込みに失敗しました。","ssr.incompatible-npl":"データのNPLスタイルが互換性がありません。","ssr.file-info-unmatched":"ファイル間でNPL情報が統一されていません。","ssr.data-info-unmatched":"データ間でNPL情報が統一されていません。","ssr.data-size-unmatched":"データ間でサイズが統一されていません。","ssr.incorrect-parameters":"パラメータの指定が正しくありません。","ssr.get-mean-failure":"平均値の取得に失敗しました。","ssr.fitting-failure":"フィッティングに失敗しました。","ssr.wrong-fitting-result":"フィッティング結果が妥当ではありません。","ssr.out-of-memory":"メモリ不足です。","ssr.grid-contains-outside":"予想される位置が範囲外に含まれています。","ssr.others":"不明なエラーが発生しました。"};async function u(e){if(e.ok)return;if(404===e.status)return"通信先が見つかりませんでした(404)。";let t=await e.text();try{let e=JSON.parse(t);console.log(e);let r=function(e){if(void 0==e)return;let t=e.detail;if(void 0==t)return;let r=t.code,n=t.message;if(void 0!=r&&void 0!=n&&"string"==typeof r&&"string"==typeof n)return l[r]||n}(e);if(void 0!=r)return r}catch(e){console.warn("Failed to parse error response",e)}return"エラーが発生しました。".concat(e.status,": ").concat(t)}let d=(0,i.createContext)({apiClient:h(s,c,null),apiGatewayUrl:s,serviceStatus:"configuring"}),v=(0,i.createContext)(()=>{}),f=(e,t)=>"setServiceStatus"===t.type?{...e,serviceStatus:t.payload.status}:e,p=()=>{let e=(0,i.useContext)(d),t=(0,i.useContext)(v);return(0,i.useRef)(e).current=e,[e,(0,i.useMemo)(()=>({setServiceStatus:e=>{t({type:"setServiceStatus",payload:{status:e}})}}),[])]};function h(e,t,r){let n=async(e,n,i)=>{let a=n.length>0?"?"+n.join("&"):"",o="".concat(t,"/").concat(e).concat(a),s=new Headers(null==i?void 0:i.headers);return r&&s.set("Authorization","Bearer ".concat(r)),fetch(o,{...i,headers:s})};return console.log("makeApiClient()"),{serviceFetch:async(e,t,r)=>n(e,t,r),setNewAccessToken:e=>{r=e,localStorage.setItem("token",e)},getAccessToken:()=>r,restoreServiceSession:async()=>{r=localStorage.getItem("token");try{let e=await n("hello",[]);if(!e.ok)throw Error("HTTP error! status: ".concat(e.status))}catch(e){return console.error(e),!1}return!0}}}function m(e){let{children:t}=e,r=(0,i.useMemo)(()=>h(s,c,null),[]),[a,o]=(0,i.useReducer)(f,{apiClient:r,apiGatewayUrl:s,serviceStatus:"configuring"}),l=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{if(!l.current)return async function(){try{let e=await a.apiClient.restoreServiceSession();console.log("restoreServiceSession",e),e?o({type:"setServiceStatus",payload:{status:"connected"}}):o({type:"setServiceStatus",payload:{status:"not-login"}})}catch(e){console.error(e),o({type:"setServiceStatus",payload:{status:"not-login"}})}}(),()=>{l.current=!0}},[]),(0,n.tZ)(d.Provider,{value:a,children:(0,n.tZ)(v.Provider,{value:o,children:t})})}},3460:function(e,t,r){"use strict";r.d(t,{ThemeStoreProvider:function(){return m},fl:function(){return p}});var n=r(9241),i=r(8438),a=r.n(i),o=r(9380),s=r(2686),c=r(1705),l=r(8153),u=r(2265),d=r(1246);let v=(0,u.createContext)({scheme:new l.S2(l.OP.fromInt(4435848),!1,-1),sourceColor:4435848}),f=(0,u.createContext)(()=>{}),p=()=>{let e=(0,u.useContext)(v),t=(0,u.useContext)(f);return[e,{resetSourceColor:()=>{t({type:"setTheme",payload:{scheme:new l.S2(l.OP.fromInt(4435848),!1,-1),sourceColor:4435848}})}}]},h=(e,t)=>{if("setTheme"===t.type){let{scheme:r,sourceColor:n}=t.payload;return e.sourceColor===n?e:{...e,scheme:r,sourceColor:n}}return e},m=e=>{let{children:t}=e,[r,i]=(0,u.useReducer)(h,{scheme:new l.S2(l.OP.fromInt(4435848),!1,-1),sourceColor:4435848}),p=(0,o.Z)((0,s.Z)({palette:{mode:"light",primary:{main:(0,l.PQ)(l.YI.primary.getArgb(r.scheme))},secondary:{main:(0,l.PQ)(l.YI.secondary.getArgb(r.scheme))},background:{default:(0,l.PQ)(l.YI.surface.getArgb(r.scheme)),paper:(0,l.PQ)(l.YI.surfaceContainer.getArgb(r.scheme))},error:{main:(0,l.PQ)(l.YI.error.getArgb(r.scheme))},text:{primary:(0,l.PQ)(l.YI.onSurface.getArgb(r.scheme))}},typography:{fontFamily:a().style.fontFamily}}));return(0,n.BX)(c.Z,{theme:p,children:[(0,n.tZ)(d.Z,{styles:e=>({body:{transition:e.transitions.create(["background-color","transform"])}})}),(0,n.tZ)(v.Provider,{value:r,children:(0,n.tZ)(f.Provider,{value:i,children:t})})]})}}},function(e){e.O(0,[1665,9388,526,5041,2036,1650,5380,9109,6631,4087,2971,7023,1744],function(){return e(e.s=310)}),_N_E=e.O()}]);