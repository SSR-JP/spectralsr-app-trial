(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{6249:function(){},9749:function(e,t,r){Promise.resolve().then(r.bind(r,1039))},1039:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var n=r(9241),i=r(4299),s=r(6548),o=r(511),a=r(8549),c=r(7351),l=r(1236),u=r(1096),d=r(824),f=r(385),v=r(8784),m=r(6631),p=r(2265),h=r(3098),g=r(5041),Z=r(6463),y=r(3460),S=r(8153);let C=e=>{let t=(0,Z.useRouter)();return(0,n.BX)(n.HY,{children:[(0,n.tZ)(s.Z,{css:(0,h.iv)({color:"inherit"}),onClick:()=>{t.push("/login"),(0,g.sy)(e)},children:"ログインする"}),(0,n.tZ)(s.Z,{css:(0,h.iv)({color:"inherit"}),onClick:()=>{(0,g.sy)(e)},children:"閉じる"})]})};function x(){let[e]=(0,i.mN)(),t=(0,Z.useRouter)(),[r]=(0,y.fl)(),x=(0,S.PQ)(S.YI.primary.getArgb(r.scheme));(0,S.PQ)(S.YI.onSurface.getArgb(r.scheme)),(0,S.PQ)(S.YI.onSurfaceVariant.getArgb(r.scheme));let[w,P]=(0,p.useState)("signup"),b=(0,p.useRef)(null),k=(0,p.useRef)(null),R=(0,p.useRef)(null),A=(0,p.useRef)(null),I=(0,p.useRef)(void 0),[N,T]=(0,p.useState)(""),[B,X]=(0,p.useState)(void 0),D=(0,p.useRef)(),M=(0,p.useMemo)(()=>new m.AM({UserPoolId:i.ZP,ClientId:i.xh}),[]);return(0,n.BX)("div",{children:[(0,n.BX)("div",{css:(0,h.iv)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh"}),children:[(0,n.tZ)(o.Z,{variant:"h4",css:(0,h.iv)({color:x,fontWeight:"bold"}),children:"アカウント作成"}),(0,n.BX)("div",{css:(0,h.iv)({marginTop:16,display:"flex",flexDirection:"column"}),children:[(0,n.BX)(a.Z,{variant:"standard",css:(0,h.iv)({}),children:[(0,n.tZ)(c.Z,{children:"メールアドレス"}),(0,n.tZ)(l.Z,{type:"email",inputRef:b})]}),(0,n.BX)(a.Z,{variant:"standard",css:(0,h.iv)({marginTop:8}),children:[(0,n.tZ)(c.Z,{children:"パスワード"}),(0,n.tZ)(l.Z,{type:"password",value:N,onChange:e=>{var t;T(e.target.value),X((t=e.target.value).length<8?{valid:!1,message:"パスワードは8文字以上で入力してください"}:/[a-z]/.test(t)?/[A-Z]/.test(t)?/[0-9]/.test(t)?/[^a-zA-Z0-9]/.test(t)?{valid:!0}:{valid:!1,message:"パスワードは記号(英数字以外の文字)を含めてください"}:{valid:!1,message:"パスワードは数字を含めてください"}:{valid:!1,message:"パスワードは大文字英語を含めてください"}:{valid:!1,message:"パスワードは小文字英語を含めてください"})}}),(0,n.tZ)(o.Z,{variant:"caption",color:"error",children:null==B?void 0:B.message})]}),(0,n.BX)(a.Z,{variant:"standard",css:(0,h.iv)({marginTop:8}),children:[(0,n.tZ)(c.Z,{children:"Family name"}),(0,n.tZ)(l.Z,{inputRef:R})]}),(0,n.BX)(a.Z,{variant:"standard",css:(0,h.iv)({marginTop:8}),children:[(0,n.tZ)(c.Z,{children:"Given name"}),(0,n.tZ)(l.Z,{inputRef:k})]}),(0,n.BX)("div",{css:(0,h.iv)({marginTop:32,display:"flex",flexDirection:"row",justifyContent:"flex-end"}),children:[(0,n.tZ)(s.Z,{onClick:()=>{t.push("/login")},children:"作成済みのアカウントでログイン"}),(0,n.tZ)(s.Z,{variant:"contained",onClick:()=>{var e,t,r;let n=null===(e=b.current)||void 0===e?void 0:e.value,i=null===(t=k.current)||void 0===t?void 0:t.value,s=null===(r=R.current)||void 0===r?void 0:r.value;if(!n||!N||!i||!s){(0,g.yv)("入力してください",{variant:"error"});return}let o=[new m.KC({Name:"email",Value:n}),new m.KC({Name:"given_name",Value:i}),new m.KC({Name:"family_name",Value:s})];M.signUp(n,N,o,[],(e,t)=>{if(e){switch(console.log(e),e.name){case"InvalidPasswordException":default:(0,g.yv)(e.message,{variant:"error"});break;case"UsernameExistsException":(0,g.yv)("このメールアドレスはすでに登録されています",{variant:"error",action:C,persist:!0})}return}I.current=null==t?void 0:t.user,D.current={email:n,password:N},(0,g.yv)("作成完了。確認コードをメールに送信しました。"),P("confirm")})},children:"Signup"})]})]})]}),(0,n.BX)(u.Z,{open:"confirm"===w,sx:{"& .MuiDialog-paper":{borderRadius:3}},children:[(0,n.tZ)(d.Z,{children:"確認コードを入力"}),(0,n.tZ)(f.Z,{css:(0,h.iv)({display:"flex",flexDirection:"column"}),children:(0,n.BX)(a.Z,{variant:"standard",css:(0,h.iv)({display:"flex",flexDirection:"column"}),children:[(0,n.tZ)(c.Z,{children:"確認コード"}),(0,n.tZ)(l.Z,{inputRef:A})]})}),(0,n.tZ)(v.Z,{children:(0,n.tZ)(s.Z,{variant:"contained",onClick:()=>{var r;let n=null===(r=A.current)||void 0===r?void 0:r.value;if(!n){(0,g.yv)("確認コードが入力されていません。",{variant:"error"});return}let i=I.current;if(!i){(0,g.yv)("user is not found",{variant:"error"});return}i.confirmRegistration(n,!0,(r,n)=>{if(r){(0,g.yv)(r.message,{variant:"error"});return}(0,g.yv)("コード確認: ".concat(n));let s=D.current;if(!s){(0,g.yv)("user auth info is not found",{variant:"error"});return}i.authenticateUser(new m.sD({Username:s.email,Password:s.password}),{onSuccess:function(r){let n=r.getAccessToken().getJwtToken();(0,g.yv)("ログイン成功"),e.apiClient.setNewAccessToken(n),t.push("/launch-service")},onFailure:function(e){(0,g.yv)("login failed",{variant:"error"}),console.error(e)}})})},children:"確認"})})]})]})}},8784:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var n=r(3950),i=r(2988),s=r(2265),o=r(4839),a=r(6990),c=r(8024),l=r(5885),u=r(2296),d=r(587);function f(e){return(0,d.ZP)("MuiDialogActions",e)}(0,u.Z)("MuiDialogActions",["root","spacing"]);var v=r(7437);let m=["className","disableSpacing"],p=e=>{let{classes:t,disableSpacing:r}=e;return(0,a.Z)({root:["root",!r&&"spacing"]},f,t)},h=(0,c.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})(e=>{let{ownerState:t}=e;return(0,i.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})});var g=s.forwardRef(function(e,t){let r=(0,l.i)({props:e,name:"MuiDialogActions"}),{className:s,disableSpacing:a=!1}=r,c=(0,n.Z)(r,m),u=(0,i.Z)({},r,{disableSpacing:a}),d=p(u);return(0,v.jsx)(h,(0,i.Z)({className:(0,o.Z)(d.root,s),ownerState:u,ref:t},c))})},4299:function(e,t,r){"use strict";r.d(t,{Er:function(){return h},NZ:function(){return u},ZP:function(){return s},mN:function(){return m},xh:function(){return o}});var n=r(9241),i=r(2265);let s="ap-northeast-3_K70QvMlqR",o="66f3b23k8hv9ne8poim1b2d8p",a="https://n2cs0lys69.execute-api.ap-northeast-3.amazonaws.com/prod",c="".concat(a,"/services/current"),l={"ssr.broken-database":"データベースが破損しています。","ssr.incompatible-extension":"データに互換性のない拡張子が含まれています。","ssr.extension-unmatched":"拡張子が一致しません。","ssr.load-failure":"データの読み込みに失敗しました。","ssr.incompatible-npl":"データのNPLスタイルが互換性がありません。","ssr.file-info-unmatched":"ファイル間でNPL情報が統一されていません。","ssr.data-info-unmatched":"データ間でNPL情報が統一されていません。","ssr.data-size-unmatched":"データ間でサイズが統一されていません。","ssr.incorrect-parameters":"パラメータの指定が正しくありません。","ssr.get-mean-failure":"平均値の取得に失敗しました。","ssr.fitting-failure":"フィッティングに失敗しました。","ssr.wrong-fitting-result":"フィッティング結果が妥当ではありません。","ssr.out-of-memory":"メモリ不足です。","ssr.grid-contains-outside":"予想される位置が範囲外に含まれています。","ssr.others":"不明なエラーが発生しました。"};async function u(e){if(e.ok)return;if(404===e.status)return"通信先が見つかりませんでした(404)。";let t=await e.text();try{let e=JSON.parse(t);console.log(e);let r=function(e){if(void 0==e)return;let t=e.detail;if(void 0==t)return;let r=t.code,n=t.message;if(void 0!=r&&void 0!=n&&"string"==typeof r&&"string"==typeof n)return l[r]||n}(e);if(void 0!=r)return r}catch(e){console.warn("Failed to parse error response",e)}return"エラーが発生しました。".concat(e.status,": ").concat(t)}let d=(0,i.createContext)({apiClient:p(a,c,null),apiGatewayUrl:a,serviceStatus:"configuring"}),f=(0,i.createContext)(()=>{}),v=(e,t)=>"setServiceStatus"===t.type?{...e,serviceStatus:t.payload.status}:e,m=()=>{let e=(0,i.useContext)(d),t=(0,i.useContext)(f);return(0,i.useRef)(e).current=e,[e,(0,i.useMemo)(()=>({setServiceStatus:e=>{t({type:"setServiceStatus",payload:{status:e}})}}),[])]};function p(e,t,r){let n=async(e,n,i)=>{r&&n.push("token=".concat(r));let s=n.length>0?"?"+n.join("&"):"";return fetch("".concat(t,"/").concat(e).concat(s),i)};return console.log("makeApiClient()"),{serviceFetch:async(e,t,r)=>n(e,t,r),setNewAccessToken:e=>{r=e,localStorage.setItem("token",e)},getAccessToken:()=>r,restoreServiceSession:async()=>{r=localStorage.getItem("token");try{let e=await n("hello",[]);if(!e.ok)throw Error("HTTP error! status: ".concat(e.status))}catch(e){return console.error(e),!1}return!0}}}function h(e){let{children:t}=e,r=(0,i.useMemo)(()=>p(a,c,null),[]),[s,o]=(0,i.useReducer)(v,{apiClient:r,apiGatewayUrl:a,serviceStatus:"configuring"}),l=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{if(!l.current)return async function(){try{let e=await s.apiClient.restoreServiceSession();console.log("restoreServiceSession",e),e?o({type:"setServiceStatus",payload:{status:"connected"}}):o({type:"setServiceStatus",payload:{status:"not-login"}})}catch(e){console.error(e),o({type:"setServiceStatus",payload:{status:"not-login"}})}}(),()=>{l.current=!0}},[]),(0,n.tZ)(d.Provider,{value:s,children:(0,n.tZ)(f.Provider,{value:o,children:t})})}},3460:function(e,t,r){"use strict";r.d(t,{ThemeStoreProvider:function(){return h},fl:function(){return m}});var n=r(9241),i=r(8438),s=r.n(i),o=r(9380),a=r(2686),c=r(1705),l=r(8153),u=r(2265),d=r(1246);let f=(0,u.createContext)({scheme:new l.S2(l.OP.fromInt(4435848),!1,-1),sourceColor:4435848}),v=(0,u.createContext)(()=>{}),m=()=>{let e=(0,u.useContext)(f),t=(0,u.useContext)(v);return[e,{resetSourceColor:()=>{t({type:"setTheme",payload:{scheme:new l.S2(l.OP.fromInt(4435848),!1,-1),sourceColor:4435848}})}}]},p=(e,t)=>{if("setTheme"===t.type){let{scheme:r,sourceColor:n}=t.payload;return e.sourceColor===n?e:{...e,scheme:r,sourceColor:n}}return e},h=e=>{let{children:t}=e,[r,i]=(0,u.useReducer)(p,{scheme:new l.S2(l.OP.fromInt(4435848),!1,-1),sourceColor:4435848}),m=(0,o.Z)((0,a.Z)({palette:{mode:"light",primary:{main:(0,l.PQ)(l.YI.primary.getArgb(r.scheme))},secondary:{main:(0,l.PQ)(l.YI.secondary.getArgb(r.scheme))},background:{default:(0,l.PQ)(l.YI.surface.getArgb(r.scheme)),paper:(0,l.PQ)(l.YI.surfaceContainer.getArgb(r.scheme))},error:{main:(0,l.PQ)(l.YI.error.getArgb(r.scheme))},text:{primary:(0,l.PQ)(l.YI.onSurface.getArgb(r.scheme))}},typography:{fontFamily:s().style.fontFamily}}));return(0,n.BX)(c.Z,{theme:m,children:[(0,n.tZ)(d.Z,{styles:e=>({body:{transition:e.transitions.create(["background-color","transform"])}})}),(0,n.tZ)(f.Provider,{value:r,children:(0,n.tZ)(v.Provider,{value:i,children:t})})]})}}},function(e){e.O(0,[665,388,526,41,36,650,2,380,273,109,631,971,23,744],function(){return e(e.s=9749)}),_N_E=e.O()}]);