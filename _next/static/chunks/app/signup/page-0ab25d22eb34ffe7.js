(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4966],{6249:function(){},9749:function(e,t,r){Promise.resolve().then(r.bind(r,1039))},1039:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=r(9241),i=r(4299),s=r(6548),o=r(511),a=r(8549),c=r(7351),l=r(1236),u=r(4526),d=r(1929),v=r(1096),f=r(824),h=r(385),m=r(8784),p=r(6631),g=r(2265),y=r(3098),Z=r(5041),S=r(6463),x=r(3460),C=r(8153);let w=e=>{let t=(0,S.useRouter)();return(0,n.BX)(n.HY,{children:[(0,n.tZ)(s.Z,{css:(0,y.iv)({color:"inherit"}),onClick:()=>{t.push("/login"),(0,Z.sy)(e)},children:"ログインする"}),(0,n.tZ)(s.Z,{css:(0,y.iv)({color:"inherit"}),onClick:()=>{(0,Z.sy)(e)},children:"閉じる"})]})};function b(){let[e]=(0,i.mN)(),t=(0,S.useRouter)(),[r]=(0,x.fl)(),b=(0,C.PQ)(C.YI.primary.getArgb(r.scheme));(0,C.PQ)(C.YI.onSurface.getArgb(r.scheme));let k=(0,C.PQ)(C.YI.onSurfaceVariant.getArgb(r.scheme)),[P,R]=(0,g.useState)("signup"),I=(0,g.useRef)(null),A=(0,g.useRef)(null),T=(0,g.useRef)(null),N=(0,g.useRef)(null),B=(0,g.useRef)(void 0),[X,_]=(0,g.useState)(""),[D,Q]=(0,g.useState)(void 0),[Y,E]=(0,g.useState)(!1),U=(0,g.useRef)(),K=(0,g.useMemo)(()=>new p.AM({UserPoolId:i.ZP,ClientId:i.xh}),[]);return(0,n.BX)("div",{children:[(0,n.BX)("div",{css:(0,y.iv)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh"}),children:[(0,n.tZ)(o.Z,{variant:"h4",css:(0,y.iv)({color:b,fontWeight:"bold"}),children:"アカウント作成"}),(0,n.BX)("div",{css:(0,y.iv)({marginTop:16,display:"flex",flexDirection:"column"}),children:[(0,n.BX)(a.Z,{variant:"standard",css:(0,y.iv)({}),children:[(0,n.tZ)(c.Z,{children:"メールアドレス"}),(0,n.tZ)(l.Z,{type:"email",inputRef:I})]}),(0,n.BX)(a.Z,{variant:"standard",css:(0,y.iv)({marginTop:8}),children:[(0,n.tZ)(c.Z,{children:"パスワード"}),(0,n.tZ)(l.Z,{type:"password",value:X,onChange:e=>{var t;_(e.target.value),Q((t=e.target.value).length<8?{valid:!1,message:"パスワードは8文字以上で入力してください"}:/[a-z]/.test(t)?/[A-Z]/.test(t)?/[0-9]/.test(t)?/[^a-zA-Z0-9]/.test(t)?{valid:!0}:{valid:!1,message:"パスワードに記号(英数字以外の文字)を含めてください"}:{valid:!1,message:"パスワードに数字を含めてください"}:{valid:!1,message:"パスワードに大文字英語を含めてください"}:{valid:!1,message:"パスワードに小文字英語を含めてください"})}}),(0,n.tZ)(o.Z,{variant:"caption",color:"error",children:null==D?void 0:D.message})]}),(0,n.BX)(a.Z,{variant:"standard",css:(0,y.iv)({marginTop:8}),children:[(0,n.tZ)(c.Z,{children:"姓"}),(0,n.tZ)(l.Z,{inputRef:T})]}),(0,n.BX)(a.Z,{variant:"standard",css:(0,y.iv)({marginTop:8}),children:[(0,n.tZ)(c.Z,{children:"名"}),(0,n.tZ)(l.Z,{inputRef:A})]}),(0,n.tZ)("div",{css:(0,y.iv)({marginTop:24,display:"flex",flexDirection:"column",alignItems:"flex-start"}),children:(0,n.tZ)(u.Z,{control:(0,n.tZ)(d.Z,{checked:Y,onChange:e=>E(e.target.checked),color:"primary"}),label:(0,n.BX)(o.Z,{variant:"body2",color:k,children:[(0,n.tZ)("a",{href:"https://spectralsr.com/spectrumdir/wp-content/uploads/SSRKK_Privacy-policy_20250625.pdf",target:"_blank",rel:"noopener noreferrer",css:(0,y.iv)({color:b,textDecoration:"none","&:hover":{textDecoration:"underline"}}),children:"プライバシーポリシー"}),"に同意する"]})})}),(0,n.BX)("div",{css:(0,y.iv)({marginTop:24,display:"flex",flexDirection:"row",justifyContent:"flex-end"}),children:[(0,n.tZ)(s.Z,{onClick:()=>{t.push("/login")},children:"作成済みのアカウントでログイン"}),(0,n.tZ)(s.Z,{variant:"contained",onClick:()=>{var e,t,r;let n=null===(e=I.current)||void 0===e?void 0:e.value,i=null===(t=A.current)||void 0===t?void 0:t.value,s=null===(r=T.current)||void 0===r?void 0:r.value;if(!n||!X||!i||!s){(0,Z.yv)("入力してください",{variant:"error"});return}if(!Y){(0,Z.yv)("プライバシーポリシーに同意してください",{variant:"error"});return}let o=[new p.KC({Name:"email",Value:n}),new p.KC({Name:"given_name",Value:i}),new p.KC({Name:"family_name",Value:s})];K.signUp(n,X,o,[],(e,t)=>{if(e){switch(console.log(e),e.name){case"InvalidPasswordException":default:(0,Z.yv)(e.message,{variant:"error"});break;case"UsernameExistsException":(0,Z.yv)("このメールアドレスはすでに登録されています",{variant:"error",action:w,persist:!0})}return}B.current=null==t?void 0:t.user,U.current={email:n,password:X},(0,Z.yv)("作成完了。確認コードをメールに送信しました。"),R("confirm")})},disabled:!Y,children:"アカウント作成"})]})]})]}),(0,n.BX)(v.Z,{open:"confirm"===P,sx:{"& .MuiDialog-paper":{borderRadius:3}},children:[(0,n.tZ)(f.Z,{children:"確認コードを入力"}),(0,n.tZ)(h.Z,{css:(0,y.iv)({display:"flex",flexDirection:"column"}),children:(0,n.BX)(a.Z,{variant:"standard",css:(0,y.iv)({display:"flex",flexDirection:"column"}),children:[(0,n.tZ)(c.Z,{children:"確認コード"}),(0,n.tZ)(l.Z,{inputRef:N})]})}),(0,n.tZ)(m.Z,{children:(0,n.tZ)(s.Z,{variant:"contained",onClick:()=>{var r;let n=null===(r=N.current)||void 0===r?void 0:r.value;if(!n){(0,Z.yv)("確認コードが入力されていません。",{variant:"error"});return}let i=B.current;if(!i){(0,Z.yv)("user is not found",{variant:"error"});return}i.confirmRegistration(n,!0,(r,n)=>{if(r){(0,Z.yv)(r.message,{variant:"error"});return}(0,Z.yv)("コード確認: ".concat(n));let s=U.current;if(!s){(0,Z.yv)("user auth info is not found",{variant:"error"});return}i.authenticateUser(new p.sD({Username:s.email,Password:s.password}),{onSuccess:function(r){let n=r.getAccessToken().getJwtToken();(0,Z.yv)("ログイン成功"),e.apiClient.setNewAccessToken(n),t.push("/launch-service")},onFailure:function(e){(0,Z.yv)("login failed",{variant:"error"}),console.error(e)}})})},children:"確認"})})]})]})}},4299:function(e,t,r){"use strict";r.d(t,{Er:function(){return p},NZ:function(){return u},ZP:function(){return s},mN:function(){return h},xh:function(){return o}});var n=r(9241),i=r(2265);let s="ap-northeast-3_K70QvMlqR",o="66f3b23k8hv9ne8poim1b2d8p",a="https://n2cs0lys69.execute-api.ap-northeast-3.amazonaws.com/prod",c="".concat(a,"/services/current"),l={"ssr.broken-database":"データベースが破損しています。","ssr.incompatible-extension":"データに互換性のない拡張子が含まれています。","ssr.extension-unmatched":"拡張子が一致しません。","ssr.load-failure":"データの読み込みに失敗しました。","ssr.incompatible-npl":"データのNPLスタイルが互換性がありません。","ssr.file-info-unmatched":"ファイル間でNPL情報が統一されていません。","ssr.data-info-unmatched":"データ間でNPL情報が統一されていません。","ssr.data-size-unmatched":"データ間でサイズが統一されていません。","ssr.incorrect-parameters":"パラメータの指定が正しくありません。","ssr.get-mean-failure":"平均値の取得に失敗しました。","ssr.fitting-failure":"フィッティングに失敗しました。","ssr.wrong-fitting-result":"フィッティング結果が妥当ではありません。","ssr.out-of-memory":"メモリ不足です。","ssr.grid-contains-outside":"予想される位置が範囲外に含まれています。","ssr.others":"不明なエラーが発生しました。","ticket.consume-failed":"計算チケットが不足しています。"};async function u(e){if(e.ok)return;if(404===e.status)return"通信先が見つかりませんでした(404)。";let t=await e.text();try{let e=JSON.parse(t);console.log(e);let r=function(e){if(void 0==e)return;let t=e.detail;if(void 0==t)return;let r=t.code,n=t.message;if(void 0!=r&&void 0!=n&&"string"==typeof r&&"string"==typeof n)return l[r]||n}(e);if(void 0!=r)return r}catch(e){console.warn("Failed to parse error response",e)}return"エラーが発生しました。".concat(e.status,": ").concat(t)}let d=(0,i.createContext)({apiClient:m(a,c,null),apiGatewayUrl:a,serviceStatus:"configuring"}),v=(0,i.createContext)(()=>{}),f=(e,t)=>"setServiceStatus"===t.type?{...e,serviceStatus:t.payload.status}:e,h=()=>{let e=(0,i.useContext)(d),t=(0,i.useContext)(v);return(0,i.useRef)(e).current=e,[e,(0,i.useMemo)(()=>({setServiceStatus:e=>{t({type:"setServiceStatus",payload:{status:e}})}}),[])]};function m(e,t,r){let n=async(e,n,i)=>{let s=n.length>0?"?"+n.join("&"):"",o="".concat(t,"/").concat(e).concat(s),a=new Headers(null==i?void 0:i.headers);return r&&a.set("Authorization","Bearer ".concat(r)),fetch(o,{...i,headers:a})};return console.log("makeApiClient()"),{serviceFetch:async(e,t,r)=>n(e,t,r),setNewAccessToken:e=>{r=e,localStorage.setItem("token",e)},getAccessToken:()=>r,restoreServiceSession:async()=>{r=localStorage.getItem("token");try{let e=await n("hello",[]);if(!e.ok)throw Error("HTTP error! status: ".concat(e.status))}catch(e){return console.error(e),!1}return!0}}}function p(e){let{children:t}=e,r=(0,i.useMemo)(()=>m(a,c,null),[]),[s,o]=(0,i.useReducer)(f,{apiClient:r,apiGatewayUrl:a,serviceStatus:"configuring"}),l=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{if(!l.current)return async function(){try{let e=await s.apiClient.restoreServiceSession();console.log("restoreServiceSession",e),e?o({type:"setServiceStatus",payload:{status:"connected"}}):o({type:"setServiceStatus",payload:{status:"not-login"}})}catch(e){console.error(e),o({type:"setServiceStatus",payload:{status:"not-login"}})}}(),()=>{l.current=!0}},[]),(0,n.tZ)(d.Provider,{value:s,children:(0,n.tZ)(v.Provider,{value:o,children:t})})}},3460:function(e,t,r){"use strict";r.d(t,{ThemeStoreProvider:function(){return p},fl:function(){return h}});var n=r(9241),i=r(8438),s=r.n(i),o=r(9380),a=r(2686),c=r(1705),l=r(8153),u=r(2265),d=r(1246);let v=(0,u.createContext)({scheme:new l.S2(l.OP.fromInt(4435848),!1,-1),sourceColor:4435848}),f=(0,u.createContext)(()=>{}),h=()=>{let e=(0,u.useContext)(v),t=(0,u.useContext)(f);return[e,{resetSourceColor:()=>{t({type:"setTheme",payload:{scheme:new l.S2(l.OP.fromInt(4435848),!1,-1),sourceColor:4435848}})}}]},m=(e,t)=>{if("setTheme"===t.type){let{scheme:r,sourceColor:n}=t.payload;return e.sourceColor===n?e:{...e,scheme:r,sourceColor:n}}return e},p=e=>{let{children:t}=e,[r,i]=(0,u.useReducer)(m,{scheme:new l.S2(l.OP.fromInt(4435848),!1,-1),sourceColor:4435848}),h=(0,o.Z)((0,a.Z)({palette:{mode:"light",primary:{main:(0,l.PQ)(l.YI.primary.getArgb(r.scheme))},secondary:{main:(0,l.PQ)(l.YI.secondary.getArgb(r.scheme))},background:{default:(0,l.PQ)(l.YI.surface.getArgb(r.scheme)),paper:(0,l.PQ)(l.YI.surfaceContainer.getArgb(r.scheme))},error:{main:(0,l.PQ)(l.YI.error.getArgb(r.scheme))},text:{primary:(0,l.PQ)(l.YI.onSurface.getArgb(r.scheme))}},typography:{fontFamily:s().style.fontFamily}}));return(0,n.BX)(c.Z,{theme:h,children:[(0,n.tZ)(d.Z,{styles:e=>({body:{transition:e.transitions.create(["background-color","transform"])}})}),(0,n.tZ)(v.Provider,{value:r,children:(0,n.tZ)(f.Provider,{value:i,children:t})})]})}}},function(e){e.O(0,[1665,9241,526,2036,819,6548,3676,4801,9009,5380,8273,9109,5820,6631,6891,2971,7023,1744],function(){return e(e.s=9749)}),_N_E=e.O()}]);