(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3797],{6102:function(e,t,r){Promise.resolve().then(r.bind(r,5411))},5411:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var n=r(9241),o=r(4299),i=r(3460),a=r(9998),s=r(6763),c=r(6091),l=r(415),u=r(3098),d=r(8153),f=r(9528),h=r(7437),p=(0,f.Z)((0,h.jsx)("path",{d:"M19 11H7.83l4.88-4.88c.39-.39.39-1.03 0-1.42a.9959.9959 0 0 0-1.41 0l-6.59 6.59c-.39.39-.39 1.02 0 1.41l6.59 6.59c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L7.83 13H19c.55 0 1-.45 1-1s-.45-1-1-1"}),"ArrowBackRounded"),v=r(1638),m=(0,f.Z)((0,h.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"Launch"),g=r(1733),Z=r(2305),x=r(9806),y=r(335),S=r(511),b=r(6548),w=r(6463),P=r(5041),C=r(2265);function k(){let[e]=(0,i.fl)(),t=(0,d.PQ)(d.YI.primary.getArgb(e.scheme)),r=(0,d.PQ)(d.YI.surface.getArgb(e.scheme)),f=(0,d.PQ)(d.YI.surfaceContainer.getArgb(e.scheme));(0,d.PQ)(d.YI.onSurface.getArgb(e.scheme));let h=(0,d.PQ)(d.YI.onSurfaceVariant.getArgb(e.scheme)),k=(0,w.useRouter)(),[B,I]=(0,C.useState)("---"),[A,N]=(0,C.useState)(!1),[R]=(0,o.mN)(),{waitingForPayment:X,purchaseRunning:M,handlePurchase:T,handleCancelPayment:F}=(0,c.s)({onPaymentSuccess:()=>{z()}}),z=async()=>{let e=R.apiGatewayUrl,t=R.apiClient.getAccessToken();try{let r=await fetch("".concat(e,"/tickets/balance"),{headers:{Authorization:"Bearer ".concat(t)}});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let n=await r.json();I(n.ticket_balance.toFixed(0))}catch(e){console.error("Failed to fetch ticket count:",e),(0,P.yv)("チケットの取得に失敗しました。",{variant:"error"})}};return(0,C.useEffect)(()=>{"connected"===R.serviceStatus&&(l.e.isProdTrialMode||z())},[R.serviceStatus]),(0,n.BX)("div",{css:(0,u.iv)({}),children:[(0,n.tZ)(g.Z,{position:"fixed",elevation:0,css:(0,u.iv)({backgroundColor:(0,Z.Fq)(r,.5),backdropFilter:"blur(16px)",color:t}),children:(0,n.BX)(x.Z,{children:[(0,n.tZ)(y.Z,{size:"large",edge:"start",color:"inherit",onClick:()=>{k.back()},children:(0,n.tZ)(p,{})}),(0,n.tZ)(S.Z,{variant:"h6",css:(0,u.iv)({fontWeight:"bold"}),children:"ユーザ情報"})]})}),(0,n.BX)("div",{css:(0,u.iv)({display:"flex",flexDirection:"column",marginTop:"80px",paddingLeft:"16px",paddingRight:"16px",marginLeft:"auto",marginRight:"auto",maxWidth:"1040px"}),children:[!l.e.isProdTrialMode&&(0,n.BX)(n.HY,{children:[(0,n.tZ)(S.Z,{variant:"h6",css:(0,u.iv)({fontWeight:"bold"}),children:"チケット"}),(0,n.BX)("div",{css:(0,u.iv)({display:"flex",flexDirection:"column",alignSelf:"center",width:"100%",maxWidth:"288px"}),children:[(0,n.BX)("div",{css:(0,u.iv)({alignItems:"center",alignSelf:"center",padding:"8px",display:"flex",flexDirection:"row"}),children:[(0,n.tZ)(v.Z,{}),(0,n.tZ)("span",{css:(0,u.iv)({}),children:"残り"}),(0,n.BX)("span",{css:(0,u.iv)({paddingLeft:"8px",fontSize:"24px"}),children:[B,"枚"]})]}),(0,n.tZ)(b.Z,{css:(0,u.iv)({}),variant:"contained",onClick:()=>N(!0),disabled:M||X,children:X?"決済処理中...":M?"処理中...":"チケットを購入"})]}),(0,n.tZ)(s.Z,{open:A,onPurchase:e=>{N(!1),T(e)},onCancel:()=>N(!1),purchaseLoading:M})]}),(0,n.BX)("div",{css:(0,u.iv)({marginTop:l.e.isProdTrialMode?0:48,paddingBottom:32}),children:[(0,n.tZ)(S.Z,{variant:"h6",css:(0,u.iv)({fontWeight:"bold",marginBottom:16,display:"flex",alignItems:"center",gap:8}),children:"アプリ情報"}),(0,n.BX)("div",{css:(0,u.iv)({display:"flex",flexDirection:"column",gap:16,backgroundColor:f,padding:20,borderRadius:12}),children:[(0,n.BX)("div",{children:[(0,n.tZ)(S.Z,{variant:"subtitle2",css:(0,u.iv)({color:h,marginBottom:4}),children:"アプリ名"}),(0,n.tZ)(S.Z,{variant:"body1",children:"SpectralSR"})]}),(0,n.BX)("div",{children:[(0,n.tZ)(S.Z,{variant:"subtitle2",css:(0,u.iv)({color:h,marginBottom:4}),children:"バージョン"}),(0,n.tZ)(S.Z,{variant:"body1",children:"1.0.1"})]}),(0,n.BX)("div",{children:[(0,n.tZ)(S.Z,{variant:"subtitle2",css:(0,u.iv)({color:h,marginBottom:8}),children:"リンク"}),(0,n.BX)("div",{css:(0,u.iv)({display:"flex",flexDirection:"column",gap:12}),children:[(0,n.BX)("a",{href:"https://spectralsr.com/",target:"_blank",rel:"noopener noreferrer",css:(0,u.iv)({color:t,textDecoration:"none",fontSize:"16px",display:"flex",alignItems:"center",gap:4,"&:hover":{textDecoration:"underline"}}),children:["ホームページ ",(0,n.tZ)(m,{fontSize:"small"})]}),(0,n.BX)("a",{href:"https://spectralsr.com/spectrumdir/wp-content/uploads/SSRKK_Privacy-policy_20250625.pdf",target:"_blank",rel:"noopener noreferrer",css:(0,u.iv)({color:t,textDecoration:"none",fontSize:"16px",display:"flex",alignItems:"center",gap:4,"&:hover":{textDecoration:"underline"}}),children:["プライバシーポリシー ",(0,n.tZ)(m,{fontSize:"small"})]})]})]})]})]})]}),X&&(0,n.tZ)(a.Z,{onCancel:F})]})}},1326:function(e,t,r){"use strict";r.d(t,{Z:function(){return Z}});var n=r(2988),o=r(3950),i=r(2265),a=r(4839),s=r(5785),c=r(7267),l=r(261),u=r(4874),d=r(7437);let f=["className","component"];var h=r(9424),p=r(2686),v=r(2737);let m=(0,r(2296).Z)("MuiBox",["root"]),g=(0,p.Z)();var Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{themeId:t,defaultTheme:r,defaultClassName:h="MuiBox-root",generateClassName:p}=e,v=(0,s.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(c.Z);return i.forwardRef(function(e,i){let s=(0,u.Z)(r),c=(0,l.Z)(e),{className:m,component:g="div"}=c,Z=(0,o.Z)(c,f);return(0,d.jsx)(v,(0,n.Z)({as:g,ref:i,className:(0,a.Z)(m,p?p(h):h),theme:t&&s[t]||s},Z))})}({themeId:v.Z,defaultTheme:g,defaultClassName:m.root,generateClassName:h.Z.generate})},7920:function(e,t,r){"use strict";let n=r(2265).createContext(void 0);t.Z=n},8868:function(e,t,r){"use strict";function n(e){let{props:t,states:r,muiFormControl:n}=e;return r.reduce((e,r)=>(e[r]=t[r],n&&void 0===t[r]&&(e[r]=n[r]),e),{})}r.d(t,{Z:function(){return n}})},8875:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(2265),o=r(7920);function i(){return n.useContext(o.Z)}},49:function(e,t,r){"use strict";r.d(t,{Z:function(){return x}});var n=r(3950),o=r(2988),i=r(2265),a=r(4839),s=r(6990),c=r(8024),l=r(5885),u=r(2296),d=r(587);function f(e){return(0,d.ZP)("MuiFormGroup",e)}(0,u.Z)("MuiFormGroup",["root","row","error"]);var h=r(8875),p=r(8868),v=r(7437);let m=["className","row"],g=e=>{let{classes:t,row:r,error:n}=e;return(0,s.Z)({root:["root",r&&"row",n&&"error"]},f,t)},Z=(0,c.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.row&&t.row]}})(e=>{let{ownerState:t}=e;return(0,o.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})});var x=i.forwardRef(function(e,t){let r=(0,l.i)({props:e,name:"MuiFormGroup"}),{className:i,row:s=!1}=r,c=(0,n.Z)(r,m),u=(0,h.Z)(),d=(0,p.Z)({props:r,muiFormControl:u,states:["error"]}),f=(0,o.Z)({},r,{row:s,error:d.error}),x=g(f);return(0,v.jsx)(Z,(0,o.Z)({className:(0,a.Z)(x.root,i),ownerState:f,ref:t},c))})},5115:function(e,t,r){"use strict";var n=r(1519);t.Z=n.Z},8256:function(e,t,r){"use strict";var n=r(292);t.Z=n.Z},1519:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(2265);function o(e){let{controlled:t,default:r,name:o,state:i="value"}=e,{current:a}=n.useRef(void 0!==t),[s,c]=n.useState(r),l=n.useCallback(e=>{a||c(e)},[]);return[a?t:s,l]}},4299:function(e,t,r){"use strict";r.d(t,{Er:function(){return m},NZ:function(){return u},ZP:function(){return i},mN:function(){return p},xh:function(){return a}});var n=r(9241),o=r(2265);let i="ap-northeast-3_K70QvMlqR",a="66f3b23k8hv9ne8poim1b2d8p",s="https://n2cs0lys69.execute-api.ap-northeast-3.amazonaws.com/prod",c="".concat(s,"/services/current"),l={"ssr.broken-database":"データベースが破損しています。","ssr.incompatible-extension":"データに互換性のない拡張子が含まれています。","ssr.extension-unmatched":"拡張子が一致しません。","ssr.load-failure":"データの読み込みに失敗しました。","ssr.incompatible-npl":"データのNPLスタイルが互換性がありません。","ssr.file-info-unmatched":"ファイル間でNPL情報が統一されていません。","ssr.data-info-unmatched":"データ間でNPL情報が統一されていません。","ssr.data-size-unmatched":"データ間でサイズが統一されていません。","ssr.incorrect-parameters":"パラメータの指定が正しくありません。","ssr.get-mean-failure":"平均値の取得に失敗しました。","ssr.fitting-failure":"フィッティングに失敗しました。","ssr.wrong-fitting-result":"フィッティング結果が妥当ではありません。","ssr.out-of-memory":"メモリ不足です。","ssr.grid-contains-outside":"予想される位置が範囲外に含まれています。","ssr.others":"不明なエラーが発生しました。","ticket.consume-failed":"計算チケットが不足しています。"};async function u(e){if(e.ok)return;if(404===e.status)return"通信先が見つかりませんでした(404)。";let t=await e.text();try{let e=JSON.parse(t);console.log(e);let r=function(e){if(void 0==e)return;let t=e.detail;if(void 0==t)return;let r=t.code,n=t.message;if(void 0!=r&&void 0!=n&&"string"==typeof r&&"string"==typeof n)return l[r]||n}(e);if(void 0!=r)return r}catch(e){console.warn("Failed to parse error response",e)}return"エラーが発生しました。".concat(e.status,": ").concat(t)}let d=(0,o.createContext)({apiClient:v(s,c,null),apiGatewayUrl:s,serviceStatus:"configuring"}),f=(0,o.createContext)(()=>{}),h=(e,t)=>"setServiceStatus"===t.type?{...e,serviceStatus:t.payload.status}:e,p=()=>{let e=(0,o.useContext)(d),t=(0,o.useContext)(f);return(0,o.useRef)(e).current=e,[e,(0,o.useMemo)(()=>({setServiceStatus:e=>{t({type:"setServiceStatus",payload:{status:e}})}}),[])]};function v(e,t,r){let n=async(e,n,o)=>{let i=n.length>0?"?"+n.join("&"):"",a="".concat(t,"/").concat(e).concat(i),s=new Headers(null==o?void 0:o.headers);return r&&s.set("Authorization","Bearer ".concat(r)),fetch(a,{...o,headers:s})};return console.log("makeApiClient()"),{serviceFetch:async(e,t,r)=>n(e,t,r),setNewAccessToken:e=>{r=e,localStorage.setItem("token",e)},getAccessToken:()=>r,restoreServiceSession:async()=>{r=localStorage.getItem("token");try{let e=await n("hello",[]);if(!e.ok)throw Error("HTTP error! status: ".concat(e.status))}catch(e){return console.error(e),!1}return!0}}}function m(e){let{children:t}=e,r=(0,o.useMemo)(()=>v(s,c,null),[]),[i,a]=(0,o.useReducer)(h,{apiClient:r,apiGatewayUrl:s,serviceStatus:"configuring"}),l=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{if(!l.current)return async function(){try{let e=await i.apiClient.restoreServiceSession();console.log("restoreServiceSession",e),e?a({type:"setServiceStatus",payload:{status:"connected"}}):a({type:"setServiceStatus",payload:{status:"not-login"}})}catch(e){console.error(e),a({type:"setServiceStatus",payload:{status:"not-login"}})}}(),()=>{l.current=!0}},[]),(0,n.tZ)(d.Provider,{value:i,children:(0,n.tZ)(f.Provider,{value:a,children:t})})}},3460:function(e,t,r){"use strict";r.d(t,{ThemeStoreProvider:function(){return m},fl:function(){return p}});var n=r(9241),o=r(8438),i=r.n(o),a=r(9380),s=r(2686),c=r(1705),l=r(8153),u=r(2265),d=r(1246);let f=(0,u.createContext)({scheme:new l.S2(l.OP.fromInt(4435848),!1,-1),sourceColor:4435848}),h=(0,u.createContext)(()=>{}),p=()=>{let e=(0,u.useContext)(f),t=(0,u.useContext)(h);return[e,{resetSourceColor:()=>{t({type:"setTheme",payload:{scheme:new l.S2(l.OP.fromInt(4435848),!1,-1),sourceColor:4435848}})}}]},v=(e,t)=>{if("setTheme"===t.type){let{scheme:r,sourceColor:n}=t.payload;return e.sourceColor===n?e:{...e,scheme:r,sourceColor:n}}return e},m=e=>{let{children:t}=e,[r,o]=(0,u.useReducer)(v,{scheme:new l.S2(l.OP.fromInt(4435848),!1,-1),sourceColor:4435848}),p=(0,a.Z)((0,s.Z)({palette:{mode:"light",primary:{main:(0,l.PQ)(l.YI.primary.getArgb(r.scheme))},secondary:{main:(0,l.PQ)(l.YI.secondary.getArgb(r.scheme))},background:{default:(0,l.PQ)(l.YI.surface.getArgb(r.scheme)),paper:(0,l.PQ)(l.YI.surfaceContainer.getArgb(r.scheme))},error:{main:(0,l.PQ)(l.YI.error.getArgb(r.scheme))},text:{primary:(0,l.PQ)(l.YI.onSurface.getArgb(r.scheme))}},typography:{fontFamily:i().style.fontFamily}}));return(0,n.BX)(c.Z,{theme:p,children:[(0,n.tZ)(d.Z,{styles:e=>({body:{transition:e.transitions.create(["background-color","transform"])}})}),(0,n.tZ)(f.Provider,{value:r,children:(0,n.tZ)(h.Provider,{value:o,children:t})})]})}}},function(e){e.O(0,[1665,9241,526,2036,819,6548,3676,4801,9009,8273,933,5820,8678,3690,2971,7023,1744],function(){return e(e.s=6102)}),_N_E=e.O()}]);